<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‚öΩ Soccer Betting Tips ‚Äî Private</title>
<style>
:root{--bg:#071025;--card:#0b1220;--accent:#1f8ef1;--muted:#99a6b2;--glass:rgba(255,255,255,0.03)}
*{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial}
body{margin:0;min-height:100vh;background:linear-gradient(180deg,#041225 0%,#071025 100%);color:#e8f0f6;padding:20px}
.wrap{max-width:1000px;margin:0 auto}
header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
h1{margin:0;font-size:20px}
.muted{color:var(--muted);font-size:13px}
.card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
.grid{display:grid;grid-template-columns:320px 1fr;gap:16px}
@media(max-width:880px){.grid{grid-template-columns:1fr}}
input,select,textarea,button{font-family:inherit}
input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
button{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.05);color:inherit}
.nav{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.tip{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));padding:12px;border-radius:8px;margin-bottom:10px}
.tip h3{margin:0 0 6px 0;font-size:15px}
.meta{font-size:13px;color:var(--muted);margin-bottom:8px}
.actions{display:flex;gap:8px}
.avatar{width:42px;height:42px;border-radius:8px;background:linear-gradient(45deg,#1f8ef1,#7c4dff);display:flex;align-items:center;justify-content:center;font-weight:700}
.topbar{display:flex;align-items:center;gap:12px}
.search-row{display:flex;gap:8px;align-items:center;margin-bottom:12px}
.small{font-size:12px}
.date-heading{font-weight:700;font-size:14px;margin:16px 0 6px;color:#b8c3d1}
.result-tag{padding:2px 6px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase}
.result-win{background:#1faa59;color:#fff}
.result-lose{background:#d63031;color:#fff}
.result-pending{background:#636e72;color:#fff}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <header>
      <div>
        <h1>‚öΩ Soccer Betting Tips</h1>
        <div class="muted">Private owner-only tip publishing</div>
      </div>
      <div class="topbar" id="auth-area"></div>
    </header>

    <div class="grid">
      <aside>
        <div class="card" style="padding:12px">
          <div class="muted small">Navigation</div>
          <div class="nav">
            <button id="nav-feed" class="btn-ghost">Tip Feed</button>
            <button id="nav-add" class="btn-ghost">Add Tip</button>
            <button id="nav-mytips" class="btn-ghost">My Tips</button>
            <button id="nav-stats" class="btn-ghost">Stats</button>
          </div>
        </div>
      </aside>

      <main>
        <div id="main-area"></div>
      </main>
    </div>
  </div>
</div>

<script>
// --- Local DB ---
const DB = {
  get(k,fallback){ try{ const v=localStorage.getItem(k); return v?JSON.parse(v):fallback }catch(e){return fallback} },
  set(k,v){ localStorage.setItem(k,JSON.stringify(v)) }
};

// --- Owner ---
const OWNER = { id: 1, name: 'Rego', email: 'modikoerego8@gmail.com', password: btoa('Modikoe.1') };
let CURRENT_USER = DB.get('currentUser', null);
if(!DB.get('tips')) DB.set('tips', []);

// --- Auth ---
function saveAuth(){ DB.set('currentUser', CURRENT_USER); renderAuthArea(); }
function login({email,password}){
  if(email===OWNER.email && btoa(password)===OWNER.password){
    CURRENT_USER = {id:OWNER.id, name:OWNER.name, email:OWNER.email};
  }else{
    CURRENT_USER = {id:Date.now(), name:email, email};
  }
  saveAuth();
}
function logout(){ CURRENT_USER=null; saveAuth(); }

// --- Rendering ---
const authArea = document.getElementById('auth-area');
const mainArea = document.getElementById('main-area');

function renderAuthArea(){
  authArea.innerHTML='';
  if(CURRENT_USER){
    const el = document.createElement('div'); el.className='topbar';
    const avatar = document.createElement('div'); avatar.className='avatar'; avatar.textContent = (CURRENT_USER.name||'U')[0].toUpperCase();
    const info = document.createElement('div'); info.innerHTML = `<div style="font-weight:700">${escapeHtml(CURRENT_USER.name)}</div><div class="small muted">${escapeHtml(CURRENT_USER.email)}</div>`;
    const r = document.createElement('div'); r.className='right';
    const btnOut = document.createElement('button'); btnOut.textContent='Logout';
    btnOut.onclick = ()=>{ logout(); alert('Logged out'); showView('feed'); };
    r.appendChild(btnOut);
    el.appendChild(avatar); el.appendChild(info); el.appendChild(r);
    authArea.appendChild(el);
  }else{
    const signIn = document.createElement('button'); signIn.textContent='Sign in'; signIn.onclick=()=>showLogin();
    authArea.appendChild(signIn);
  }
}

// --- Views ---
function showView(view){
  if(view==='feed') renderFeed();
  else if(view==='add') renderAdd();
  else if(view==='mytips') renderMyTips();
  else if(view==='stats') renderStats();
}

// --- Feed ---
function renderFeed(){
  const tips = DB.get('tips',[]).slice().sort((a,b)=>new Date(b.matchDate)-new Date(a.matchDate));
  mainArea.innerHTML=`<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <div><h2 style='margin:0'>Tip Feed</h2><div class='muted small'>${tips.length} total</div></div>
    <input id='q' placeholder='Search match or league...' style='max-width:250px;padding:8px;border-radius:8px;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.1)' />
  </div>
  <div id='tips-list'></div>`;
  const q = document.getElementById('q');
  const container = document.getElementById('tips-list');

  function refresh(){
    const v = q.value.trim().toLowerCase();
    let list = tips;
    if(v) list = list.filter(t=>(t.match+t.tip+t.league).toLowerCase().includes(v));

    container.innerHTML='';
    const byDate = {};
    list.forEach(t=>{
      const dateLabel = new Date(t.matchDate).toDateString();
      if(!byDate[dateLabel]) byDate[dateLabel] = [];
      byDate[dateLabel].push(t);
    });

    Object.keys(byDate).forEach(date=>{
      const h = document.createElement('div'); h.className='date-heading'; h.textContent=date;
      container.appendChild(h);
      byDate[date].forEach(t=>{
        const el=document.createElement('div'); el.className='tip card';
        const resClass = t.result==='Win'?'result-win':t.result==='Lose'?'result-lose':'result-pending';
        el.innerHTML=`<h3>${escapeHtml(t.match)} <span class='muted small'>¬∑ ${escapeHtml(t.league)}</span></h3>
        <div class='meta'>Tip: ${escapeHtml(t.tip)} ¬∑ Odds: ${escapeHtml(t.odds)} ¬∑ <span class='result-tag ${resClass}'>${t.result||'Pending'}</span></div>
        <div style='display:flex;justify-content:space-between;align-items:center'>
          <div class='muted small'>${escapeHtml(t.notes||'')}</div>
          <div class='actions'>
            <button class='btn-ghost' data-like='${t.id}'>üëç ${t.likes||0}</button>
            ${CURRENT_USER && CURRENT_USER.email===OWNER.email?`<button class='btn-ghost' data-edit='${t.id}'>Edit</button>`:''}
          </div>
        </div>`;
        container.appendChild(el);
      });
    });

    container.querySelectorAll('[data-like]').forEach(b=>b.onclick=()=>{
      likeTip(parseInt(b.getAttribute('data-like')));
      refresh();
    });

    container.querySelectorAll('[data-edit]').forEach(b=>b.onclick=()=>{
      const id=parseInt(b.getAttribute('data-edit'));
      editResult(id);
    });
  }
  q.addEventListener('input',refresh);
  refresh();
}

// --- Add Tip ---
function renderAdd(){
  if(!CURRENT_USER || CURRENT_USER.email !== OWNER.email){
    mainArea.innerHTML='<h3>Only owner can add tips.</h3>';
    return;
  }
  mainArea.innerHTML=`<h2>Add Tip</h2>
  <form id='add-form' style='display:grid;gap:8px;max-width:700px'>
    <input id='league' placeholder='League (e.g. Premier League)' required />
    <input id='match' placeholder='Match (Team A vs Team B)' required />
    <input id='matchDate' type='date' required />
    <div class='row' style='display:flex;gap:8px'><input id='tip' placeholder='Tip (e.g. Arsenal to win)' required /><input id='odds' placeholder='Odds (e.g. 2.10)' /></div>
    <textarea id='notes' placeholder='Notes / confidence' rows='3'></textarea>
    <div style='display:flex;gap:8px'><button type='submit'>Publish</button><button type='button' id='cancel' class='btn-ghost'>Cancel</button></div>
  </form>`;
  const form=document.getElementById('add-form');
  form.onsubmit=e=>{
    e.preventDefault();
    const tips=DB.get('tips',[]);
    tips.push({
      id:Date.now(),
      authorId:CURRENT_USER.id,
      league:league.value.trim(),
      match:match.value.trim(),
      tip:tip.value.trim(),
      odds:odds.value.trim(),
      notes:notes.value.trim(),
      matchDate:matchDate.value,
      likes:0,
      result:'Pending'
    });
    DB.set('tips',tips);
    alert('Tip published');
    showView('feed');
  };
  document.getElementById('cancel').onclick=()=>showView('feed');
}

// --- Edit Result ---
function editResult(id){
  const tips=DB.get('tips',[]);
  const tip=tips.find(t=>t.id===id);
  if(!tip) return;
  const newResult=prompt("Enter result (Win/Lose/Pending):", tip.result||'Pending');
  if(!newResult) return;
  tip.result=newResult.charAt(0).toUpperCase()+newResult.slice(1).toLowerCase();
  DB.set('tips',tips);
  showView('feed');
}

// --- My Tips ---
function renderMyTips(){
  if(!CURRENT_USER || CURRENT_USER.email !== OWNER.email){
    mainArea.innerHTML='<h3>Tips not available for this user.</h3>';
    return;
  }
  const tips=DB.get('tips',[]).filter(t=>t.authorId===CURRENT_USER.id);
  mainArea.innerHTML=`<h2>My Tips</h2><div class='muted small'>${tips.length} tips</div>`;
  tips.sort((a,b)=>new Date(b.matchDate)-new Date(a.matchDate)).forEach(t=>{
    const resClass = t.result==='Win'?'result-win':t.result==='Lose'?'result-lose':'result-pending';
    const div=document.createElement('div');div.className='tip card';
    div.innerHTML=`<h3>${escapeHtml(t.match)}</h3>
    <div class='meta'>${escapeHtml(t.tip)} ¬∑ ${escapeHtml(t.odds)} ¬∑ <span class='result-tag ${resClass}'>${t.result||'Pending'}</span></div>
    <div class='actions'>
      <button class='btn-ghost' data-edit='${t.id}'>Result</button>
      <button class='btn-ghost' data-del='${t.id}'>Delete</button>
    </div>`;
    mainArea.appendChild(div);
  });
  mainArea.querySelectorAll('[data-del]').forEach(b=>b.onclick=()=>{
    if(confirm('Delete this tip?')){
      const id=parseInt(b.getAttribute('data-del'));
      DB.set('tips',DB.get('tips',[]).filter(t=>t.id!==id));
      renderMyTips();
    }
  });
  mainArea.querySelectorAll('[data-edit]').forEach(b=>b.onclick=()=>editResult(parseInt(b.getAttribute('data-edit'))));
}

// --- Stats ---
function renderStats(){
  const tips=DB.get('tips',[]);
  const total=tips.length;
  const wins=tips.filter(t=>t.result==='Win').length;
  const losses=tips.filter(t=>t.result==='Lose').length;
  const pending=tips.filter(t=>!t.result || t.result==='Pending').length;
  const rate=total?((wins/total)*100).toFixed(1):0;
  mainArea.innerHTML=`<h2>Stats</h2>
  <div style='display:flex;gap:12px;margin-top:12px;flex-wrap:wrap'>
    <div class='card' style='padding:12px;min-width:120px'><div class='small muted'>Total tips</div><div style='font-size:20px;font-weight:700'>${total}</div></div>
    <div class='card' style='padding:12px;min-width:120px'><div class='small muted'>Wins</div><div style='font-size:20px;font-weight:700'>${wins}</div></div>
    <div class='card' style='padding:12px;min-width:120px'><div class='small muted'>Losses</div><div style='font-size:20px;font-weight:700'>${losses}</div></div>
    <div class='card' style='padding:12px;min-width:120px'><div class='small muted'>Pending</div><div style='font-size:20px;font-weight:700'>${pending}</div></div>
    <div class='card' style='padding:12px;min-width:120px'><div class='small muted'>Win Rate</div><div style='font-size:20px;font-weight:700'>${rate}%</div></div>
  </div>`;
}

// --- Like ---
function likeTip(id){
  const tips=DB.get('tips',[]).map(t=>t.id===id?{...t,likes:(t.likes||0)+1}:t);
  DB.set('tips',tips);
}

// --- Login ---
function showLogin(){
  mainArea.innerHTML=`<h2>Sign in</h2>
  <form id='login-form' style='display:grid;gap:8px;max-width:480px'>
    <input id='email' placeholder='Email' required />
    <input id='password' placeholder='Password' type='password' required />
    <button>Sign in</button>
  </form>`;
  document.getElementById('login-form').onsubmit=e=>{
    e.preventDefault();
    login({email:email.value.trim(),password:password.value});
    alert('Signed in');showView('feed');
  };
}

// --- Helpers ---
function escapeHtml(s){return String(s||'').replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]));}

// --- Nav ---
document.getElementById('nav-feed').onclick=()=>showView('feed');
document.getElementById('nav-add').onclick=()=>showView('add');
document.getElementById('nav-mytips').onclick=()=>showView('mytips');
document.getElementById('nav-stats').onclick=()=>showView('stats');

// --- Init ---
renderAuthArea();showView('feed');
</script>
</body>
</html>
